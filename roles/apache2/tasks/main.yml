---
- name: include vars 
  include_vars:
    file: "{{ ansible_distribution }}.yml"

- name: install packages
  package: 
    name: "{{ PackageName }}"

- name: apache main configuration
  template:
    src: httpd.conf.j2
    dest: "{{ DocumentRoot }}/conf/httpd.conf"
    owner: root
    group: root
    mode: 0644
  notify: " restart {{ ServiceName }}"

- name: apache VirtualHost configuration
  template:
    src: virtualhost.conf.j2
    dest: "{{ DocumentRoot }}/conf.d/{{ item.name }}.conf"
    owner: root
    group: root
    mode: 0644
  notify: "restart {{ ServiceName }}"
  with_items: VirtualHost